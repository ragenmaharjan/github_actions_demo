name: Github actions demo

on:
    push: 
        branches: 
            - main
            - staging
            - development

jobs:
    buiild_upload_notify:
        name: build_upload_notify
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v1
            - uses: actions/setup-java@v1
              with:
                    java-version: '12.x'
            - uses: subosito/flutter-action@v1
              with:
                channel: 'stable'
            - name: Get Branch Name
              id: branch
              run: echo "::set-output name-branch::${GITHUB_REF##/}"            
            - name: Get Today Date
              id: date
              run: echo "::set-output name-date::${date + '%Y-%m-%d'}"
            - name: Get Folder Id by condition
              uses: haya14busa/action-cond@v1
              id: FolderId
              with: 
                cond: ${{ steps.branch.outputs.branch=='main'}}
                if_true: ${{secrets.MASTERFOLDERID}}
                if_false: ${{secrets.QATESTFOLDERID}}
            - run: flutter pub get
            - run: flutter build apk

